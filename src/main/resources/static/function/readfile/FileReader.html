<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>读取txt文件</title>
    <style type="text/css">
        body {
            background-color: rgba(255, 255, 255, 0.98);
            margin-left: 20px;
            margin-top: 20px;
            font-family: "新宋体","宋体",sans-serif;
        }
    </style>
</head>
<body>

<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/onload" target="_blank">filereader文档</a>
<br><br>

<a href="https://www.w3schools.com/jsref/jsref_obj_string.asp" target="_blank"> js str相关文档</a>
<br><br>

<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/font-family" target="_blank"> font相关文档</a>
<br><br>

<button onclick="test01()" > 测试是否支持 </button>

<h1> 上传文本测试 start </h1>

<p>
    <label>请选择一个文件：</label>
    <input type="file" id="file_input" />
</p>

<div id="result"></div>

<h1> 上传图片测试 end </h1>

<p>
    <ol>
        <li>读取文本到str</li>
        <li>自定义页面样式，每页显示数据，算出综页数</li>
        <li>根据正则匹配出章节</li>
        <li>取出每个章节所在的位置</li>
        <li>章节列到左侧，点击展示相应数据</li>
    </ol>
</p>

</body>

<script type="text/javascript">
    
    function test01() {
        if(window.FileReader) {
            var fr = new FileReader();
            // add your code here
            alert("Supported by your browser!");
        }
        else {
            alert("Not supported by your browser!");
        }
    }

    var content;
    var content_length;
    var input  = document.getElementById("file_input"); //input file
    input.onchange = function(){
        var file = this.files[0];
        if(!!file){
            //读取本地文件，以gbk编码方式输出
            var reader = new FileReader();
            reader.readAsText(file,"utf-8");
            reader.onload = function(){
                //读取完毕后输出结果
                content = this.result;
                // 文本大小
                content_length = content.length;
                console.log(content_length);
                for(var i = 0;i<content_length;i++){
                    console.log(i + ": " + content.slice(i,i+1));
                }
            }
        }
    }

</script>

</html>